---
title: Shell之I/O重定向
date: 2016-06-02 19:53:08
tags: shell
---

## 引子
今天翻之前的老邮件发现如下的一个关于I/O重定向的老题目，一下子懵逼了。。。
```
#cat std.sh
#!/bin/sh
echo "stdout"
echo "stderr" >&2

#/bin/sh std.sh 2>&1 > /dev/null (这个命令输出什么?)

#/bin/sh std.sh > /dev/null 2>&1 (这个命令输出什么?)
```
只好重新学习下I/O重定向相关的只是了，~\(≧▽≦)/~啦啦啦

## 什么是I/O重定向
首先重新明确下stdin/stdout/stderr:
stdin(0):   默认是keyboard
stdout(1):  默认是屏幕
stderr(2):  错误消息输出到屏幕

所谓重定向就是：
> <p align="left"> Redirection simply means capturing output from a file, command, program, script, or even code block within a script and sending it as input to another file, command, program, or script. </p>

再贴个Advanced Bash Scripting中的例子
```
ls -yz >> command.log 2>&1
#  Capture result of illegal options "yz" in file "command.log."
#  Because stderr is redirected to the file,
#+ any error messages will also be there.
#  Note, however, that the following does *not* give the same result.
ls -yz 2>&1 >> command.log
#  Outputs an error message, but does not write to file.
#  More precisely, the command output (in this case, null)
#+ writes to the file, but the error message goes only to stdout.
#  If redirecting both stdout and stderr,
#+ the order of the commands makes a difference.
```

根据这个思路试着看之前的2个问题
```
#/bin/sh std.sh 2>&1 > /dev/null
```
输出：stderr
```
#/bin/sh std.sh 2>&1 > /dev/null
```
输出： （没有任何输出）
