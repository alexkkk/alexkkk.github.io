---
title: speex的坑
date: 2017-03-03 00:14:22
tags: speex
---

在做语音识别服务器的时候用到speex压缩，发现了一个坑。

对应一个speex的音频文件不同的解压操作方式会得到不同的结果。

假设一个speex文件有N个frame, 用如下的2各方法解压：

方法1：
初始化decoder -> 解压第i个frame -> close decoder
初始化decoder -> 解压第i + 1个frame -> close decoder
...


方法2：
initialize decoder
解压第i个frame
解压第i + 1个frame
...
close decoder


得到的pcm文件完全不一样。。。。
具体原因还要看下speex的源代码才知道，等有空把。。。
